{% extends 'common/base.html' %}

{% load static %}

{% block content %}

    <link rel="stylesheet" href="{% static 'model/css/index.css' %}" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

</head>

<body>

    <!-- Layout principal -->
    <div class="main-container">

        <!-- Sidebar -->
        <div class="sidebar">
            <h5></h5>

            <div class="mb-3">
                <label for="paisSelect" class="form-label">País</label>
                <select class="form-select" id="paisSelect">
                    <option selected>Escolher país</option>
                    <option value="br">Brasil</option>
                    <option value="us">Estados Unidos</option>
                    <option value="fr">França</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="regiaoSelect" class="form-label">Região</label>
                <select class="form-select" id="regiaoSelect">
                    <option selected>Escolher região</option>
                    <option value="norte">Norte</option>
                    <option value="sul">Sul</option>
                    <option value="centro">Centro</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="modeloSelect" class="form-label">Modelo</label>
                <select class="form-select" id="modeloSelect">
                    <option selected>Escolher modelo</option>
                    <option value="1">Modelo A</option>
                    <option value="2">Modelo B</option>
                    <option value="3">Modelo C</option>
                </select>
            </div>

            <div class="d-grid mt-4 mb-4">
                <button type="button" class="btn btn-primary">Buscar</button>
            </div>

            <div class="spacer"></div>

            <div class="d-grid">
                <a href="tutorial" class="btn btn-footer">Como Usar?</a>
            </div>
        </div>

        <!-- Mapa -->
        <div class="map-container">
            <div id="map"></div>
        </div>

        <!-- Inputs e Botões -->
        <div class="controls-container">
            <div class="row g-3 align-items-end p-3">

                <div class="col-auto">
                    <button class="btn btn-outline-secondary"
                            title="Mais informações"
                            data-bs-toggle="collapse"
                            data-bs-target="#extra-info"
                            aria-expanded="false"
                            aria-controls="extra-info"
                    >
                        <i class="bi bi-chevron-down"></i>
                    </button>
                </div>

                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text" id="lat">Latitude</span>
                        <input type="text"
                               class="form-control"
                               placeholder="Informe uma latitude..."
                               aria-label="Latitude"
                               aria-describedby="lat"
                               value=''
                        >
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text" id="lon">Longitude</span>
                        <input type="text"
                               class="form-control"
                               placeholder="Informe uma longitude..."
                               aria-label="Longitude"
                               aria-describedby="lon"
                               value=''
                        >
                    </div>
                </div>

                <div class="col-auto">
                    <button class="btn btn-outline-primary"
                            title="Download">
                        <i class="bi bi-download"></i>
                    </button>
                </div>

            </div>

            <!-- Informações adicionais -->
            <div class="collapse mt-3" id="extra-info">
                <div class="card card-body">
                    Modelo:
                </div>
                <div class="card card-body">
                    Experimentos:
                </div>
                <div class="card card-body">
                    Dados Locais:
                </div>
                <div class="card card-footer"></div>
            </div>
        </div>

    </div>

<!-- Script para carregar o Leaflet -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // Inicializa o mapa
    const map = L.map('map').setView([-7.1219, -34.8789], 6); // Exemplo: Paraíba

    // Adiciona o layer do mapa (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Captura clique no mapa
    map.on('click', function(e) {
        const { lat, lng } = e.latlng;
        alert(`Latitude: ${lat.toFixed(5)}\nLongitude: ${lng.toFixed(5)}`);
    });
</script>

{% endblock content %}
