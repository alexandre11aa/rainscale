{% extends 'common/base.html' %}

{% load static %}

{% block content %}

    <link rel="stylesheet" href="{% static 'model/css/index.css' %}" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

</head>

<body>

    <!-- Layout principal -->
    <div class="main-container">

        <!-- Sidebar -->
        <div class="sidebar">
            <h5></h5>

            <div class="mb-3">
                <label for="paisSelect" class="form-label">País</label>
                <select class="form-select" id="paisSelect">
                    <option selected>Escolher país</option>
                    <option value="br">Brasil</option>
                    <option value="us">Estados Unidos</option>
                    <option value="fr">França</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="regiaoSelect" class="form-label">Região</label>
                <select class="form-select" id="regiaoSelect">
                    <option selected>Escolher região</option>
                    <option value="norte">Norte</option>
                    <option value="sul">Sul</option>
                    <option value="centro">Centro</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="modeloSelect" class="form-label">Modelo</label>
                <select class="form-select" id="modeloSelect">
                    <option selected>Escolher modelo</option>
                    <option value="1">Modelo A</option>
                    <option value="2">Modelo B</option>
                    <option value="3">Modelo C</option>
                </select>
            </div>

            <div class="d-grid mt-4 mb-4">
                <button type="button" class="btn btn-primary">Buscar</button>
            </div>

            <div class="spacer"></div>

            <div class="d-grid">
                <a href="tutorial" class="btn btn-footer">Como Usar?</a>
            </div>
        </div>

        <!-- Mapa -->
        <div class="map-container">
            <div id="map"></div>
        </div>

        <!-- Inputs e Botões -->
        <div class="controls-container">
            <div class="row g-3 align-items-end p-3">

                <div class="col-auto">
                    <button class="btn btn-outline-secondary"
                            title="Mais informações"
                            data-bs-toggle="collapse"
                            data-bs-target="#extra-info"
                            aria-expanded="false"
                            aria-controls="extra-info"
                    >
                        <i class="bi bi-chevron-down"></i>
                    </button>
                </div>

                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text" id="lat">Latitude</span>
                        <input type="text"
                               class="form-control"
                               placeholder="Informe uma latitude..."
                               aria-label="Latitude"
                               aria-describedby="lat"
                               value=''
                        >
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text" id="lon">Longitude</span>
                        <input type="text"
                               class="form-control"
                               placeholder="Informe uma longitude..."
                               aria-label="Longitude"
                               aria-describedby="lon"
                               value=''
                        >
                    </div>
                </div>

                <div class="col-auto">
                    <button class="btn btn-outline-primary"
                            title="Download">
                        <i class="bi bi-download"></i>
                    </button>
                </div>

            </div>

            <!-- Informações adicionais -->
            <div class="collapse mt-3" id="extra-info">
                <div class="card card-body">
                    <h5 class="card-title">Modelo</h5>
                    <table class="table table-striped table-bordered">
                        <tbody>
                            <tr><th>País</th><td>Brasil</td></tr>
                            <tr><th>Região</th><td>Paraíba</td></tr>
                            <tr><th>Autor</th><td>Nome Exemplo</td></tr>
                            <tr><th>Nome do Modelo</th><td>Modelo de Previsão XYZ</td></tr>
                            <tr><th>Temporalidade</th><td>Mensal</td></tr>
                            <tr><th>Variável</th><td>Temperatura</td></tr>
                            <tr><th>Unidade</th><td>°C</td></tr>
                            <tr><th>Pontos (.csv)</th><td><a href="#">baixar</a></td></tr>
                            <tr><th>Modelo (.pkl/.h5)</th><td><a href="#">baixar</a></td></tr>
                            <tr><th>Caderno (.ipynb)</th><td><a href="#">abrir</a></td></tr>
                            <tr><th>Repositório</th><td><a href="#">github.com/exemplo</a></td></tr>
                            <tr><th>Latitude Máxima </th><td>5.123</td></tr>
                            <tr><th>Latitude Mínima </th><td>-5.123</td></tr>
                            <tr><th>Longitude Máxima</th><td>45.123</td></tr>
                            <tr><th>Longitude Mínima</th><td>35.123</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="card card-body">
                    <h5 class="card-title">Experimento</h5>
                    <table class="table table-striped table-bordered">
                        <tbody>
                            <tr><th>Nome</th><td>Exemplo de Simulação</td></tr>
                            <tr><th>Projeto/Atividade</th><td>CMIP6</td></tr>
                            <tr><th>Servidor de Origem</th><td>data-node.example.org</td></tr>
                            <tr><th>Modelo Climático</th><td>Modelo XYZ</td></tr>
                            <tr><th>Instituição</th><td>Instituto de Clima</td></tr>
                            <tr><th>Tipo de Modelo</th><td>Atmosphere-Ocean General Circulation Model</td></tr>
                            <tr><th>Experimento</th><td>historical</td></tr>
                            <tr><th>Sub-experimento</th><td>none</td></tr>
                            <tr><th>Resolução Espacial</th><td>100 km</td></tr>
                            <tr><th>Variante</th><td>r1i1p1f1</td></tr>
                            <tr><th>Grade Espacial</th><td>gn</td></tr>
                            <tr><th>Tabela</th><td>Amon</td></tr>
                            <tr><th>Frequência</th><td>Mensal</td></tr>
                            <tr><th>Domínio</th><td>atmos</td></tr>
                            <tr><th>Variável</th><td>tas</td></tr>
                            <tr><th>Unidade da Variável</th><td>K</td></tr>
                            <tr><th>Nome Padrão CF</th><td>air_temperature</td></tr>
                            <tr><th>Versão</th><td>v20220101</td></tr>
                            <tr><th>Data Inicial</th><td>1850-01-01</td></tr>
                            <tr><th>Data Final</th><td>2014-12-31</td></tr>
                            <tr><th>Link</th><td><a href="#">acessar</a></td></tr>
                            <tr><th>Referência</th><td><a href="#">doi.org/10.xxxx/xxxxx</a></td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="card card-body">
                    <h5 class="card-title">Dados Locais</h5>
                    <table class="table table-striped table-bordered">
                        <tbody>
                            <tr><th>Nome</th><td>Exemplo de Dados Locais</td></tr>
                            <tr><th>Temporalidade</th><td>Mensal</td></tr>
                            <tr><th>Variável</th><td>Temperatura</td></tr>
                            <tr><th>Unidade da Variável</th><td>°C</td></tr>
                            <tr><th>Data de Início</th><td>2000-01-01</td></tr>
                            <tr><th>Data de Término</th><td>2020-12-31</td></tr>
                            <tr><th>Latitude Máxima</th><td>5.00</td></tr>
                            <tr><th>Latitude Mínima</th><td>-5.00</td></tr>
                            <tr><th>Longitude Máxima</th><td>45.00</td></tr>
                            <tr><th>Longitude Mínima</th><td>35.00</td></tr>
                            <tr><th>Link</th><td><a href="#">acessar</a></td></tr>
                            <tr><th>Referência</th><td><a href="#">doi.org/10.xxxx/xxxxx</a></td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="card card-footer"></div>
            </div>
        </div>

    </div>

<!-- Script para carregar o Leaflet -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // Inicializa o mapa
    const map = L.map('map').setView([-7.1219, -34.8789], 6); // Exemplo: Paraíba

    // Adiciona o layer do mapa (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Captura clique no mapa
    map.on('click', function(e) {
        const { lat, lng } = e.latlng;
        alert(`Latitude: ${lat.toFixed(5)}\nLongitude: ${lng.toFixed(5)}`);
    });
</script>

{% endblock content %}
